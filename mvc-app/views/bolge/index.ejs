<%# 
    ============================================
    BÃ–LGE LÄ°STESÄ° SAYFASI
    ============================================
    
    MVC AKIÅI:
    1. KullanÄ±cÄ±: GET /bolge (tarayÄ±cÄ±da URL'ye gider)
    2. Router: routers/bolgeRoutes.js â†’ router.get('/', bolgeController.index)
    3. Controller: controllers/bolgeController.js â†’ index() metodu Ã§alÄ±ÅŸÄ±r
    4. Model: models/Bolge.js â†’ Bolge.findAll() â†’ VeritabanÄ±ndan veri Ã§eker
    5. Controller: res.render('bolge/index', { title, bolgeler })
    6. View: views/bolge/index.ejs â†’ Bu dosya render edilir
    7. KullanÄ±cÄ±: HTML sayfasÄ±nÄ± gÃ¶rÃ¼r
    
    VERÄ° KAYNAKLARI:
    - title: Controller'dan geliyor (bolgeController.js â†’ res.render)
    - bolgeler: Model'den geliyor (Bolge.findAll() â†’ VeritabanÄ±)
%>

<h1><%= title %></h1>
<!-- 
    SORU: Bu title nereden geliyor?
    CEVAP: Controller'dan (bolgeController.js)
    - Controller'da: res.render('bolge/index', { title: 'BÃ¶lgeler' })
    - View'da: <%= title %> â†’ "BÃ¶lgeler" yazÄ±sÄ± gÃ¶sterilir
-->

<div class="actions">
    <a href="/bolge/create" class="btn btn-primary">â• Yeni BÃ¶lge Ekle</a>
</div>
<!-- 
    SORU: Bu link nereye gidiyor?
    CEVAP: GET /bolge/create
    - Router: routers/bolgeRoutes.js â†’ router.get('/create', bolgeController.create)
    - Controller: bolgeController.create() Ã§alÄ±ÅŸÄ±r
    - View: views/bolge/create.ejs gÃ¶sterilir
-->

<%# BÃ¶lge listesi tablosu %>
<% if (bolgeler && bolgeler.length > 0) { %>
    <!-- 
        SORU: bolgeler nereden geliyor?
        CEVAP: Model'den (Bolge.findAll())
        - Model: models/Bolge.js â†’ Bolge.findAll()
        - VeritabanÄ±: SELECT * FROM bolge
        - Controller: const bolgeler = await Bolge.findAll()
        - View: res.render('bolge/index', { bolgeler: bolgeler })
    -->
    
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>BÃ¶lge AdÄ±</th>
                <th>Ä°ÅŸlemler</th>
            </tr>
        </thead>
        <tbody>
            <%# 
                SORU: Bu dÃ¶ngÃ¼ ne yapÄ±yor?
                CEVAP: Controller'dan gelen bolgeler dizisini dÃ¶ngÃ¼ye alÄ±yor
                - Her bÃ¶lge iÃ§in bir satÄ±r (<tr>) oluÅŸturuyor
                - bolge.bolge_id â†’ BÃ¶lgenin ID'si
                - bolge.bolge_ad â†’ BÃ¶lgenin adÄ±
            %>
            <% bolgeler.forEach(bolge => { %>
                <tr>
                    <td><%= bolge.bolge_id %></td>
                    <!-- 
                        SORU: bolge.bolge_id nereden geliyor?
                        CEVAP: VeritabanÄ±ndan (bolge tablosundan)
                        - Model: SELECT * FROM bolge â†’ { bolge_id: 1, bolge_ad: "Marmara" }
                        - Controller: bolgeler dizisine eklenir
                        - View: DÃ¶ngÃ¼de her bolge objesi iÃ§in bolge.bolge_id gÃ¶sterilir
                    -->
                    
                    <td><%= bolge.bolge_ad %></td>
                    <!-- 
                        SORU: bolge.bolge_ad nereden geliyor?
                        CEVAP: VeritabanÄ±ndan (bolge tablosundan)
                        - Model: SELECT * FROM bolge â†’ { bolge_id: 1, bolge_ad: "Marmara" }
                        - Controller: bolgeler dizisine eklenir
                        - View: DÃ¶ngÃ¼de her bolge objesi iÃ§in bolge.bolge_ad gÃ¶sterilir
                    -->
                    
                    <td class="actions">
                        <a href="/bolge/<%= bolge.bolge_id %>" class="btn btn-view">ğŸ‘ï¸ GÃ¶rÃ¼ntÃ¼le</a>
                        <!-- 
                            SORU: Bu link nereye gidiyor?
                            CEVAP: GET /bolge/:id (Ã¶rnek: /bolge/1)
                            - Router: routers/bolgeRoutes.js â†’ router.get('/:id', bolgeController.show)
                            - Controller: bolgeController.show() Ã§alÄ±ÅŸÄ±r
                            - Model: Bolge.findById(id) â†’ VeritabanÄ±ndan tek bÃ¶lge Ã§eker
                            - View: views/bolge/show.ejs gÃ¶sterilir
                        -->
                        
                        <a href="/bolge/<%= bolge.bolge_id %>/edit" class="btn btn-edit">âœï¸ DÃ¼zenle</a>
                        <!-- 
                            SORU: Bu link nereye gidiyor?
                            CEVAP: GET /bolge/:id/edit (Ã¶rnek: /bolge/1/edit)
                            - Router: routers/bolgeRoutes.js â†’ router.get('/:id/edit', bolgeController.edit)
                            - Controller: bolgeController.edit() Ã§alÄ±ÅŸÄ±r
                            - Model: Bolge.findById(id) â†’ VeritabanÄ±ndan tek bÃ¶lge Ã§eker
                            - View: views/bolge/edit.ejs gÃ¶sterilir
                        -->
                        
                        <form method="POST" action="/bolge/<%= bolge.bolge_id %>?_method=DELETE" style="display: inline;">
                            <button type="submit" class="btn btn-delete" onclick="return confirm('Bu bÃ¶lgeyi silmek istediÄŸinize emin misiniz?')">ğŸ—‘ï¸ Sil</button>
                        </form>
                        <!-- 
                            SORU: Bu form ne yapÄ±yor?
                            CEVAP: DELETE /bolge/:id isteÄŸi gÃ¶nderiyor
                            - Form: method="POST" ama ?_method=DELETE var
                            - Middleware: method-override â†’ POST'u DELETE'a Ã§evirir
                            - Router: routers/bolgeRoutes.js â†’ router.delete('/:id', bolgeController.destroy)
                            - Controller: bolgeController.destroy() Ã§alÄ±ÅŸÄ±r
                            - Model: Bolge.delete(id) â†’ VeritabanÄ±ndan bÃ¶lgeyi siler
                            - Redirect: /bolge sayfasÄ±na yÃ¶nlendirir
                        -->
                    </td>
                </tr>
            <% }) %>
        </tbody>
    </table>
    
    <p style="color: #7f8c8d; margin-top: 20px;">
        ğŸ“Š Toplam <strong><%= bolgeler.length %></strong> bÃ¶lge bulundu.
        <!-- 
            SORU: bolgeler.length nereden geliyor?
            CEVAP: JavaScript array property'si
            - bolgeler bir array (dizi)
            - .length â†’ Dizinin eleman sayÄ±sÄ±nÄ± verir
            - Ã–rnek: [1, 2, 3].length = 3
        -->
    </p>
<% } else { %>
    <div class="empty-state">
        <p>ğŸ“­ HenÃ¼z bÃ¶lge bulunmamaktadÄ±r.</p>
        <a href="/bolge/create" class="btn btn-primary">Ä°lk BÃ¶lgeyi Ekle</a>
    </div>
<% } %>


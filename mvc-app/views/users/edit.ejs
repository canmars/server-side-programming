<%# 
    Kullanıcı Düzenleme Formu
    Controller: userController.edit (form gösterimi)
    Route: GET /users/:id/edit
%>

<h1>Kullanıcı Düzenle</h1>

<%# Hata Mesajları %>
<% if (typeof errors !== 'undefined' && errors.length > 0) { %>
    <div class="error-messages">
        <h3>Lütfen aşağıdaki hataları düzeltin:</h3>
        <ul>
            <% errors.forEach(error => { %>
                <li><%= error %></li>
            <% }) %>
        </ul>
    </div>
<% } %>

<% if (typeof error !== 'undefined' && error) { %>
    <div class="error-message">
        <p><%= error %></p>
    </div>
<% } %>

<% if (user) { %>
    <%# Kullanıcı Düzenleme Formu %>
    <form method="POST" action="/users/<%= user.id %>?_method=PUT" class="user-form">
        <input type="hidden" name="_method" value="PUT">
        
        <div class="form-group">
            <label for="name">İsim *</label>
            <input 
                type="text" 
                id="name" 
                name="name" 
                value="<%= user.name %>"
                required
                placeholder="Kullanıcı adı"
            >
        </div>

        <div class="form-group">
            <label for="email">Email *</label>
            <input 
                type="email" 
                id="email" 
                name="email" 
                value="<%= user.email %>"
                required
                placeholder="ornek@email.com"
            >
        </div>

        <div class="form-group">
            <label for="password">Yeni Şifre (Opsiyonel)</label>
            <input 
                type="password" 
                id="password" 
                name="password" 
                placeholder="Değiştirmek istemiyorsanız boş bırakın"
                minlength="6"
            >
            <small>Şifreyi değiştirmek istemiyorsanız boş bırakın. En az 6 karakter olmalıdır.</small>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Güncelle</button>
            <a href="/users/<%= user.id %>" class="btn btn-cancel">İptal</a>
        </div>
    </form>
<% } else { %>
    <div class="error-message">
        <p>Kullanıcı bulunamadı.</p>
        <a href="/users" class="btn btn-back">Kullanıcı Listesine Dön</a>
    </div>
<% } %>

